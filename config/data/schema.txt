table users {
  id integer [pk, increment]
  name varchar(255)
  email varchar(255)
  password varchar(255)
}

table projects {
  id integer [pk, increment]
  designer_name varchar(255)
  pattern_name varchar(255)
  pattern_url varchar(2048)
  category_id integer [ref: > categories.id]
  image_path varchar(255)
  started date
  completed date
  execution_time integer
  size varchar(255)
}

table project_translations {
  id integer [pk, increment]
  project_id integer [ref: > projects.id]
  locale varchar(5)
  name varchar(255) [not null]
  notes text
  craft varchar(255)
  status varchar(255)
  destination_use varchar(255)
  slug varchar(255) unique
}

table crafts {
  id integer [pk, increment]
  key varchar(255) [unique]
}

table craft_translations {
  id integer [pk, increment]
  craft_id integer [ref: > crafts.id]
  locale varchar(5)
  name varchar(255) [not null]
  description text
  slug varchar(255) unique
}

table categories {
  id integer [pk, increment]
  key varchar(255) [unique]
  parent_id integer [null, note: "Self-reference: null = top-level category"]
}

table category_translations {
  id integer [pk, increment]
  category_id integer [ref: > categories.id]
  locale varchar(5)
  name varchar(255) [not null]
  slug varchar(255)
}

table yarns {
  id integer [pk, increment]
  name varchar(255) [not null, unique]
  brand varchar(255)
  yarn_type_id integer [ref: > yarn_types.id]
  unit_weight integer
  meterage integer
  fiber_types_number integer [default: 1]
  image_path varchar(255)
}

table fibers {
  id integer [pk, increment]
  key varchar(255) [unique]
}

table fiber_translations {
  id integer [pk, increment]
  fiber_id integer [ref: > fibers.id]
  locale varchar(5)
  name varchar(255) [not null]
  description mediumtext
  slug varchar(255) unique
}

table tags {
  id integer [pk, increment]
  key varchar(255) [unique]
}

table tag_translations {
  id integer [pk, increment]
  tag_id integer [ref: > tags.id]
  locale varchar(5)
  name varchar(255) [not null]
  description varchar(255)
  slug varchar(255) unique
}

table attributes {
  id integer [pk, increment]
  key varchar(255) [unique]
  parent_id integer [null, note: "Self-reference: null = top-level attribute"]
}

table attribute_translations {
  id integer [pk, increment]
  attribute_id integer [ref: > attributes.id]
  locale varchar(5)
  name varchar(255) [not null]
  description varchar(255)
  slug varchar(255) unique
}

table colorways {
  id integer [pk, increment]
  color_code varchar(255)
  key varchar(255)
  image_path varchar(255)
}

table colorway_translations {
  id integer [pk, increment]
  colorway_id integer [ref: > colorways.id]
  locale varchar(5)
  name varchar(255)
  slug varchar(255) unique
}

table productions_statuses {
  id integer [pk, increment]
  key varchar(255)
}

table productions_status_translations {
  id integer [pk, increment]
  production_status_id integer [ref: > productions_statuses.id]
  locale varchar(5)
  label varchar(255)
}

table yarn_standards {
  id integer [pk, increment]
  code integer
  key varchar(255)
}

table yarn_standard_translations {
  id integer [pk, increment]
  yarn_standard_id integer [ref: > yarn_standards.id]
  locale varchar(5)
  label varchar(255)
}

table yarn_standard_specs {
  id integer [pk, increment]
  yarn_standard_id integer [ref: > yarn_standards.id]
  ply integer
  min_wpi integer
  max_wpi integer
  knit_gauge varchar(255)
  min_needle_metric decimal
  max_needle_metric decimal
  min_needle_us integer
  max_needle_us integer
  crochet_gauge varchar(255)
  min_hook_metric decimal
  max_hook_metric decimal
  min_hook_us integer
  max_hook_us integer
}

table yarn_types {
  id integer [pk, increment]
  yarn_standard_id integer [ref:> yarn_standards.id]
  key varchar(255)
}

table yarn_type_translations {
  id integer [pk, increment]
  yarn_type_id integer [ref: > yarn_types.id]
  locale varchar(5)
  label varchar(255)
}

table project_yarn {
  id integer [pk, increment]
  project_id integer [ref: <> projects.id]
  yarn_id integer [ref: <> yarns.id]
  colorway_id integer [ref: <> colorways.id]
  quantity decimal
  meterage integer
  weight integer
}

table craft_project {
  id integer [pk, increment]
  project_id integer [ref: <> projects.id]
  craft_id integer [ref: <> crafts.id]
}

table fiber_yarn {
  id integer [pk, increment]
  fiber_id integer [ref: <> fibers.id]
  yarn_id integer [ref: <> yarns.id]
  percentage integer
}

table colorway_yarn {
  id integer [pk, increment]
  colorway_id integer [ref: <> colorways.id]
  yarn_id integer [ref: <> yarns.id]
  production_status_id integer [ref: > productions_statuses.id]
}

table stash_items {
  id integer [pk, increment]
  user_id integer [ref: > users.id]
  colorway_yarn_id integer [ref: > colorway_yarn.id]
  quantity decimal
  meterage decimal
  weight decimal
}

table project_tag {
  id integer [pk, increment]
  project_id integer [ref: <> projects.id]
  tag_id integer [ref: <> tags.id]
}

table attribute_project {
  id integer [pk, increment]
  attribute_id integer [ref: <> attributes.id]
  project_id integer [ref: <> projects.id]
}