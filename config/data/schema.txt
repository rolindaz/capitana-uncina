table projects {
  id integer [pk, increment]
  pattern_name varchar(255)
  pattern_url varchar(2048)
  category_id integer [ref: > categories.id]
  image_path varchar(255)
  started date
  completed date
  execution_time integer
  size varchar(255)
  correct boolean
}

table project_translations {
  id integer [pk, increment]
  project_id integer [ref: > projects.id]
  locale varchar(5)
  name varchar(255) [not null]
  notes text
  craft varchar(255)
  status varchar(255)
  destination_use varchar(255)
  slug varchar(255)
}

table crafts {
  id integer [pk, increment]
  key varchar(255) [unique]
}

table craft_translations {
  id integer [pk, increment]
  craft_id integer [ref: > crafts.id]
  locale varchar(5)
  name varchar(255) [not null]
  slug varchar(255)
}

table categories {
  id integer [pk, increment]
  key varchar(255) [unique]
  parent_id integer [null, note: "Self-reference: null = top-level category"]
}

table category_translations {
  id integer [pk, increment]
  category_id integer [ref: > categories.id]
  locale varchar(5)
  name varchar(255) [not null]
  slug varchar(255)
}

table yarns {
  id integer [pk, increment]
  key varchar(255) [unique]
  name varchar(255) [not null]
  brand varchar(255)
  weight varchar(255)
  category varchar(255)
  ply integer
  unit_weight integer
  meterage integer
  fiber_types_number integer [default: 1]
  image_path varchar(255)
  min_hook_size decimal
  max_hook_size decimal
  min_needle_size decimal
  max_needle_size decimal
}

table yarn_translations {
  id integer [pk, increment]
  yarn_id integer [ref: > yarns.id]
  locale varchar(5)
  color_type varchar(255)
  slug varchar(255)
}

table fibers {
  id integer [pk, increment]
  key varchar(255) [unique]
}

table fiber_translations {
  id integer [pk, increment]
  fiber_id integer [ref: > fibers.id]
  locale varchar(5)
  name varchar(255) [not null]
  slug varchar(255)
}

table tags {
  id integer [pk, increment]
  key varchar(255) [unique]
}

table tag_translations {
  id integer [pk, increment]
  tag_id integer [ref: > tags.id]
  locale varchar(5)
  name varchar(255) [not null]
  description varchar(255)
  slug varchar(255)
}

table attributes {
  id integer [pk, increment]
  key varchar(255) [unique]
  parent_id integer [null, note: "Self-reference: null = top-level attribute"]
}

table attribute_translations {
  id integer [pk, increment]
  attribute_id integer [ref: > attributes.id]
  locale varchar(5)
  name varchar(255) [not null]
  description varchar(255)
  slug varchar(255)
}

table colorways {
  id integer [pk, increment]
  key varchar(255)
}

table colorway_translations {
  id integer [pk, increment]
  locale varchar(5)
  name varchar(255)
  slug varchar(255)
}

table project_yarn {
  id integer [pk, increment]
  project_id integer [ref: <> projects.id]
  yarn_id integer [ref: <> yarns.id]
  quantity decimal
  meterage integer
  weight integer
}

table project_craft {
  id integer [pk, increment]
  project_id integer [ref: <> projects.id]
  craft_id integer [ref: <> crafts.id]
}

table fiber_yarn {
  id integer [pk, increment]
  fiber_id integer [ref: <> fibers.id]
  yarn_id integer [ref: <> yarns.id]
  percentage integer
}

table colorway_yarn {
  id integer [pk, increment]
  colorway_id integer [ref: <> colorways.id]
  yarn_id integer [ref: <> yarns.id]
}

table project_tag {
  id integer [pk, increment]
  project_id integer [ref: <> projects.id]
  tag_id integer [ref: <> tags.id]
}

table attribute_project {
  id integer [pk, increment]
  attribute_id integer [ref: <> attributes.id]
  project_id integer [ref: <> projects.id]
}